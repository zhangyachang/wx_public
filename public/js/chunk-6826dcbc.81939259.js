(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6826dcbc"],{2727:function(e,t,o){},3803:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"add_new_app"},[o("CContentHeader",{attrs:{content:"新建H5应用",isShowIcon:!0}}),o("div",{staticClass:"ana_content"},[o("div",{staticClass:"ana_content_wrap"},[o("AppInfo",{attrs:{inputmodel:e.uploadInfo}}),o("viewRange",{on:{allow_ranges:e.allow_ranges}}),o("selectLocation",{attrs:{radio:e.uploadInfo}}),o("AppAddBtn",{on:{add:e.addBtn}})],1)])],1)},a=[],s=(o("96cf"),o("3b8d")),i=(o("7f7f"),o("1d40")),r=o("1480"),l=o("3382"),u=o("e65e"),c=o("b1f8"),d={mixins:[c["a"]],data:function(){return{uploadInfo:{appName:"",appDes:"",typeid:"",allow_ranges:[]},middleFilesResult:{logoUrl:""}}},methods:{allow_ranges:function(e){var t;console.log("这里拿到选择的东西"),console.log(e);for(var o=0,n=e.length;o<n;o++){t=e[o];var a={};"dep"===t.type?(a.type="dep",a.dep=t._id):"user"===t.type?(a.type="user",a.user=t._id):(a.type="dep",a.dep=t._id),a.name=t.name,this.uploadInfo.allow_ranges.push(a)}},uploadLogo:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loadding=this.$zero.wholeLoadding({text:"上传logo中..."}),console.log("上传logo是什么东西"),console.log(this.uploadInfo),e.next=5,this.mixinUploadImg([this.uploadInfo.imgFile]);case 5:if(t=e.sent,this.loadding.close(),t){e.next=9;break}return e.abrupt("return",console.log("logo上传出错了"));case 9:console.log("url路径地址"),console.log(t),this.middleFilesResult.logoUrl=t[0].file,this.createH5();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),createH5:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,o,n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("创建函数触发"),console.log("上传的什么东西"),console.log(this.uploadInfo),console.log("应用的链接"),console.log(this.middleFilesResult),t=this.$zero.getCompany_id(),o=this.$zero.getUserid(),console.log("创建应用接口调用"),this.loadding=this.$zero.wholeLoadding({text:"上传应用中"}),e.next=11,this.$api.application.createH5({company_id:t,_name:this.uploadInfo.appName,typeid:this.uploadInfo.typeid,icon:this.middleFilesResult.logoUrl,description:this.uploadInfo.appDes,founder:o,manages:[o],allow_ranges:this.uploadInfo.allow_ranges});case 11:if(n=e.sent,this.loadding.close(),console.log("上传结果"),console.log(n),75500!==n.statusCode){e.next=17;break}return e.abrupt("return",this.$zero.notify({title:"应用创建失败",message:"服务繁忙，上传失败，请稍后再试",duration:0}));case 17:if(75200===n.statusCode||75201===n.statusCode){e.next=19;break}return e.abrupt("return",this.$zero.notify({title:"应用创建失败",message:"应用创建失败，错误码:".concat(n.statusCode),duration:0}));case 19:this.$zero.notify({title:"应用创建成功",message:"新建了一个H5应用，可在控制台查看",duration:0}),setTimeout(function(){a.$router.go(-1)},3e3);case 21:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addBtn:function(){this.uploadLogo()},getAppDetailByid:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},created:function(){console.log("crate");var e=this.$route.query.updateappid;e&&this.getAppDetailByid(e)},components:{AppInfo:i["a"],AppAddBtn:r["a"],selectLocation:l["a"],viewRange:u["a"]}},p=d,g=(o("8a17"),o("2877")),f=Object(g["a"])(p,n,a,!1,null,null,null);t["default"]=f.exports},"8a17":function(e,t,o){"use strict";var n=o("2727"),a=o.n(n);a.a}}]);
//# sourceMappingURL=chunk-6826dcbc.81939259.js.map