<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    #imgwrap img {
      width: 200px;
    }

    #writeNameImg {
      width: 200px;
      /* height: 50px; */
      background-color: #fff;
    }
  </style>

<!-- <script src="http://192.168.12.233:8910/target/target-script-min.js#anonymous"></script> -->
<!-- <script src="https://unpkg.com/axios/dist/axios.min.js"></script> -->
</head>

<body>
  3000端口子页面

  <div id="click">点击了</div>
  <h1 id="pdfPerview">预览pdf文件</h1>

  <h1 id="child_page">打开子页面</h1>
  <h1 id="close_page">关闭页面</h1>

  <h1 id="get_token">获取请求token</h1>

  <h1 id="get_record">获取录音</h1>
  <h1 id="get_scanCode">调用扫一扫</h1>



  <h1 id="writeName">签名</h1>

  <h1 id="backHome">回到首页</h1>

  <div>
    <img id="writeNameImg" src="" alt="">
  </div>
  <h1 id="getLocalStorage">获取父页面localStorage</h1>
  <h1 id="getSessionStorage">获取父页面SeStorage</h1>

  <h1 id="uniap">Uniapp调用函数方法</h1>

  <h1 id="uni-selectimage">uniapp 选择相册</h1>


  <a href="http://192.168.12.233:3000/b.html">跳转到b.html</a>

  <h1 id="btn">获取通讯录</h1>

  <h1 id="btn1">选择通讯录H5多选人和部门</h1>
  <h1 id="btn2">选择通讯录H5多选人</h1>


  <h1 id="img">选择相册</h1>
  <h1 id="title">修改页面标题</h1>
  <img id="img1" src="" alt="">

  <h1 id="preview">预览图片</h1>
  <img src="http://192.168.11.160/zero-box/file/img/a91e3c80-32b2-11ea-8b79-4b01ce5cd82f.png" alt="">

  <div id="txt"></div>

  <div id="imgwrap">
  </div>

  <input type="file" value="选择图片">

  <h1 id="userInfo">获取获取用户信息</h1>

  <!-- <script src="./js/vconsole.js"></script> -->
  <script>
    // new VConsole()
  </script>

  <!-- <script src="./sdk.js"></script> -->

  <!-- <script src="./1.js"></script> -->
  
  <script src="./hl-sdk.js"></script>

  <!-- <script src="https://js.cdn.aliyun.dcloud.net.cn/dev/uni-app/uni.webview.0.1.52.js"></script> -->
  <!-- <script src="https://js.cdn.aliyun.dcloud.net.cn/dev/uni-app/uni.webview.1.5.2.js"></script> -->

  <script src="http://192.168.12.233:8910/target/target-script-min.js#anonymous"></script>
  <script>

    console.log('当前打印日志');

    // function fn(){
    //   console.log('1111111111');
    // }

    document.getElementById('click').onclick = function(){
      console.log('当前打印日志');

      // axios({
      //   url: 'http://xiaoye121.com:8001/bs/api/todayPlan?uid=f29c1910-6448-11e9-8067-63fe00919946'
      // })
      //   .then(res => {
         
      //     console.log('请求结果');
      //     console.log(res)
      //   })
      //   .catch(e => {
      //     console.log('请求失败');
      //     console.log(e);
      //   })
    };



    // 预览pdf文件
    document.getElementById('pdfPerview').onclick = function(){
      alert('预览pdf文件');
      HL.previewFile({
        api: 'hl.sdk.previewFile',
        data: {
          url: 'http://217s44092d.imwork.net/file/dd.pdf', // 需要预览文件的地址(必填，可以使用相对路径)
          name: 'HTTP协议中文版', // 需要预览文件的文件名(不填的话取url的最后部分)
          size: 41984 // 需要预览文件的字节大小(必填)
        },
        success(data){
          console.log('回调数据');
          console.log(data)
        }
      })
    };

// 

    function fn(){

    }

    var  a= 1;
    for( let i = 0;i<arr.length;i++){
      console.log(i);
    }

    for(let i=0;i<arr.length;i++){

    }



    // for(let i=0;i)
    // for
    // for
    // for
    // for

    async function fn(){
      

      // await 
    }

    function Fn(){
      console.log('打印字符串');
    }

    Fn();


    async function fn(){

      await new Promise((resolve, reject) => {
        resolve({status: 200, msg})
      });
      return {

      }
    }







    // async function fn(){
    //   console.log('111');
    //   await new Promise(())
    // }
    // function HL(){
    // }
    // alert('页面');
    //  HL.ready(function(){
    // //   HL.getAccessToken({
    // //     api: 'hl.sdk.getAccessToken',
    // //     data: {
    // //       appid: 'appid', // 当前调用接口的appid
    // //     },
    // //     success(res) {
    // //       // alert('111');
    // //       console.log('返回值1', res);
    // //       console.log(res);
    // //     }
    // //   })

    // //   HL.getAccessToken({
    // //     api: 'hl.sdk.getAccessToken',
    // //     data: {
    // //       appid: 'appid', // 当前调用接口的appid
    // //     },
    // //     success(res) {
    // //       // alert('222');
    // //       console.log('返回值2', res);
    // //       console.log(res);
    // //     }
    // //   })
    // });

    document.getElementById('get_token').onclick = function () {
      console.log('获取token');
      HL.getAccessToken({
        api: 'hl.sdk.getAccessToken',
        data: {
          appid: 'appid', // 当前调用接口的appid
        },
        success(res) {
          console.log('返回值', res);
          console.log(res);
        }
      })
    };

    document.getElementById('get_record').onclick = function(){
      // alert('获取录音');
      HL.getRecord({
        api: 'hl.sdk.record',
        data: {
          type: 'cloud', // local返回本地路径，可供自己上传， cloud返回云路径（HTTP地址）
        },
        success(res){
          console.log('返回值');
          console.log(JSON.stringify(res));
        }
      });
    };

    document.getElementById('get_scanCode').onclick = function(){
      console.log('调用扫一扫功能');
      HL.scanCode({
        api: 'hl.sdk.scanCode',
        data: {
          onlyFromCamera: true, // 默认否 是否只能从相机扫码 {Boolean}，不允许从相册选择图片 该参数仅在APP端生效
          scanType: ['qrCode'], // 扫码类型  可以指定扫二维码还是条形码（一维码），默认二者都有  qrCode二维码， 一维码barCode
        },
        success(res){
          if(res.code == 0){
            console.log('扫码结果', res);
            console.log(JSON.stringify(res));
            alert('我扫码的内容' + res.data.con);
          }else{
            alert(JSON.stringify(res));
          }
        }
      })
    };

    document.getElementById('backHome').onclick = function(){
      console.log('回到首页');
        HL.backHome({
          api: 'hl.sdk.backHome',
          success(res){
            console.log('测试结果', res);
          }
        });
    };

    document.getElementById('child_page').onclick = function () {
      window.location.href = 'http://192.168.12.233:8082';
    };

    document.getElementById('writeName').onclick = function () {
      console.log('写签名');
      HL.writeAutograph({
        api: 'hl.sdk.writeAutograph',
        data: {
          type: 'base64', // urlHTTP地址 base64字符串base64
          // type: 'base64', // urlHTTP地址 base64字符串base64
        },
        success(res) {
          console.log('签名返回值', res);
          // res / /
          // document.getElementById('writeNameImg').src = res.base64;
          document.getElementById('writeNameImg').src = res.url;

        }
      });
    };

    // 关闭当前页面
    document.getElementById('close_page').onclick = function(){
      // alert('关闭页面');
      // window.location.go(-1);
      setTimeout(() => {
        window.close();
      }, 1000)
    }
    

    document.getElementById('getLocalStorage').onclick = function () {
      // alert('获取localStorage');
      HL.getLocalStorage({
        api: 'hl.sdk.getLocalStorage',
        data: {
          key: 'aaaaaaaaaaaaaaa'
        },
        success(res) {
          console.log('获取结果', res);
          alert('获取结果', res);
          // console.log('获取的结果', JSON.parse(res));
        }
      });
    };

    document.getElementById('getSessionStorage').onclick = function () {
      // alert('获取SessionStorage');
      HL.getLocalStorage({
        api: 'hl.sdk.getSessionStorage',
        data: {
          key: 'cinfo'
        },
        success(res) {
          console.log('获取的', res);
          // console.log(JSON.parse(res));
        }
      });
    };

    document.getElementById('uni-selectimage').onclick = function () {
      // console.log('uniapp选择相册');
      alert('调用了选择相册');
      HL.chooseImage({
        api: 'hl.sdk.chooseImage',
        data: {
          count: 9, // 最多可以选择的图片张数，默认9
          sizeType: ['original'], // original 原图，compressed 压缩图，默认二者都有
          sourceType: ['album'], // album 从相册选图，camera 使用相机，默认二者都有。如需直接开相机或直接选相册，请只使用一个选项
        },
        success: function (res) {
          alert('获取成功了');
          console.log(res);
        }
      });
    };



    document.getElementById('uniap').onclick = function () {
      // uni.getEnv(function (res) {
      //   alert('当前环境' + JSON.stringify(res));
      // });

      // alert('uniapp');

      // uni.postMessage({
      //   data: {
      //     api: "hl.sdk.getInfo",
      //     data: {
      //       action: 'postMessage',
      //       name: '张三'
      //     },
      //     success: 'callBack',
      //     age: '20'
      //   }
      // });

      // setTimeout(() => {
      //   console.log('定时器执行');
      //   console.log(window.aaa);
      // }, 2000);
    };


    // console.log('查看uniapp的window对象');
    // console.log(window.parent);
    // console.log(window.parent.postMessage);

    // console.log(getQuery('data'));  //获取 uni-app 传来的值
    // function getQuery(name) {
    //   console.log('获取结果');
    //   // 正则：[找寻'&' + 'url参数名字' = '值' + '&']（'&'可以不存在）
    //   var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    //   var r = window.location.search.substr(1).match(reg);
    //   if (r != null) {
    //     // 对参数值进行解码
    //     console.log('返回值1');
    //     return unescape(r[2]);
    //   }
    //   console.log('返回值2');
    //   return null;
    // }


    // console.log(HL);
    // (function () {
    //   // console.log('子页面的初始化函数已经执行');
    //   HL.mail({
    //     api: 'hl.sdk.mail',
    //     data: {
    //       hlappid: '5e071967f58d815cace2bd79',
    //     },
    //     success: function (msg) {
    //       console.log('调用成功之后的返回值----------------开始执行自己的操作逻辑------', msg);
    //       document.body.innerHTML = `我取得的父页面的消息   ${JSON.stringify(msg)}`;
    //     }
    //   });
    // })();

    var oBtn = document.getElementById('btn');
    var oImg = document.getElementById('img');
    var oTxt = document.getElementById('txt');

    document.getElementById('btn1').onclick = function () {
      // alert('选择H5的通讯录');
      HL.mail({
        api: 'hl.sdk.mail',
        data: {
          hlappid: '5e16d7d7552de19c9ba05139',
          // multiple: true,
          // startWithDepartmentId: 0,
          type: ['department', 'user'],

          // selectionOrder: ["5e0b817b57aca8280456bd80", "5e0c60b92872659ab8688b63", "5e0b822b57aca8280456bda2"],
          // pickedUsers: [
          //   {
          //     _id: "5e0c60b92872659ab8688b63",
          //     id: "zhangyachang",
          //     name: "张亚昌",
          //     avatar: "http://wework.qpic.cn/bizmail/kD2bQlOgwhUP9M2NIGW9uh36pQibNk20e4uNehxVmdR2FrtVicB6yiaeA/0",
          //     type: "user"
          //   }
          // ],
          // "pickedDepartments": [
          //   {
          //     _id: "5e0b817b57aca8280456bd80",
          //     id: "12540",
          //     name: "曲靖卷烟厂1"
          //   },
          //   {
          //     _id: "5e0b822b57aca8280456bda2",
          //     id: "10",
          //     name: "测试部门"
          //   }
          // ],

          // pickedDepartments: [
          //   {
          //     _id: "5e0b822b57aca8280456bda2",
          //     id: "10",
          //     name: "测试部门",
          //     
          //   }
          // ]
        },
        success: function (res) {
          // alert('调取成功之后的返回值');
          // alert(JSON.stringify(msg));
          console.log('调取成功之后的返回值', res);
          // console.log('调用成功之后的返回值----------------开始执行自己的操作逻辑------', msg);

          oTxt.innerHTML = `我取得的父页面的消息   ${JSON.stringify(res)}`;
        }
      });
    };


    // <h1 id="btn1">选择通讯录H5多选人和部门</h1>
    //   <h1 id="">选择通讯录H5多选人</h1>
    //   <h1 id="">选择通讯录H5多选部门</h1>
    //   <h1 id="">选择通讯录H5单选人</h1>
    //   <h1 id="">选择通讯录H5单选部门</h1>


    document.getElementById('btn2').onclick = function () {
      alert('是我');
      HL.mail({
        api: 'hl.sdk.mail',
        data: {
          hlappid: '5e16d7d7552de19c9ba05139',
          multiple: false,
          startWithDepartmentId: 0,
          type: ['user'],
          // type: ['department', 'user'],
        },
        success: function (msg) {
          alert('调取成功之后的返回值');
          alert(JSON.stringify(msg));
          console.log('调取成功之后的返回值');
          console.log(msg);
          // console.log('调用成功之后的返回值----------------开始执行自己的操作逻辑------', msg);

          oTxt.innerHTML = `我取得的父页面的消息   ${JSON.stringify(msg)}`;
        }
      });
    };

    // var result = {
    //   departmentList: [
    //     {
    //       _id: "5e0b817b57aca8280456bd80",
    //       id: "12540",
    //       name: "曲靖卷烟厂1",
    //       type: "dep"
    //     },
    //     {
    //       _id: "5e0b822b57aca8280456bda2",
    //       id: "10",
    //       name: "测试部门",
    //       type: "dep",
    //     }
    //   ],
    //   selectid: ["5e0b817b57aca8280456bd80", "5e0c60b92872659ab8688b63", "5e0b822b57aca8280456bda2"],
    //   userList: [
    //     {
    //       _id: "5e0c60b92872659ab8688b63",
    //       id: "zhangyachang",
    //       name: "张亚昌",
    //       avatar: "http://wework.qpic.cn/bizmail/kD2bQlOgwhUP9M2NIGW9uh36pQibNk20e4uNehxVmdR2FrtVicB6yiaeA/0",
    //       type: "user"
    //     }
    //   ]
    // }


    var deuser = {
      departmentList: [
        {
          _id: "5e0b817b57aca8280456bd80",
          id: "12540",
          name: "曲靖卷烟厂1",
          type: "dep"
        },
        {
          _id: "5e0b822b57aca8280456bda2",
          id: "10",
          name: "测试部门",
          type: "dep",
        }
      ],
      selectid: ["5e0b817b57aca8280456bd80", "5e0c60b92872659ab8688b63", "5e0b822b57aca8280456bda2"],
      userList: [
        {
          _id: "5e0c60b92872659ab8688b63",
          id: "zhangyachang",
          name: "张亚昌",
          avatar: "http://wework.qpic.cn/bizmail/kD2bQlOgwhUP9M2NIGW9uh36pQibNk20e4uNehxVmdR2FrtVicB6yiaeA/0",
          type: "user"
        }
      ]
    }


    oBtn.onclick = function () {
      HL.mail({
        api: 'hl.sdk.mail',
        data: {
          hlappid: '5e16d7d7552de19c9ba05139',
          multiple: true,
          startWithDepartmentId: 0,
          type: ['user', 'department']
        },
        success: function (msg) {
          alert('调取成功之后的返回值');
          console.log('调用成功之后的返回值----------------开始执行自己的操作逻辑------', msg);
          oTxt.innerHTML = `我取得的父页面的消息   ${JSON.stringify(msg)}`;
        }
      });
    };

    // 统一参数格式
    var obj = {
      departmentList: [],
      userList: [
        { id: 'zgejianhui', name: '葛建辉', avatar: 'http地址' }
      ]
    };

    oImg.onclick = function () {
      alert('选择头像');
      HL.chooseImage({
        api: 'hl.sdk.chooseImage',
        data: {
          count: 9,
          hlappid: '5e0ae2515e6ba391f9449554'
        },
        success(data) {
          for (var i = 0; i < data.length; i++) {
            var img = document.createElement('img');
            img.src = data[i];
            document.getElementById('imgwrap').appendChild(img);
          }
        }
      });
    };


    document.getElementById('title').onclick = function () {
      alert('修改标题啊');
      HL.updateTitle({
        api: 'hl.sdk.updateTitle',
        data: {
          title: '修改标题'
        },
        success(data) {
          alert('修改成功了');
        }
      });
    };



    document.getElementById('preview').onclick = function () {
      alert('预览图片');
      HL.previewImage({
        api: 'hl.sdk.previewImage',
        data: {
          current: 'http://192.168.11.160/zero-box/file/img/a91e3c80-32b2-11ea-8b79-4b01ce5cd82f.png', // 当前显示图片的http链接
          urls: ['http://192.168.11.160/zero-box/file/img/a91e3c80-32b2-11ea-8b79-4b01ce5cd82f.png'] // 需要预览的图片http链接列表
        },
        success(res) {
          alert('预览成功');
          console.log('预览成功', res);
        }
      })
    }

    document.getElementById('userInfo').onclick = function () {
      var date = Date.now();
      HL.getUserInfo({
        api: 'hl.sdk.userInfo',
        success(userInfo) {
          console.log('耗时', Date.now() - date);
          console.log('用户信息', userInfo);
        }
      });
    };

    /*
      模块          文件名        路径
      通讯录模块    addressBook  /zero-box/mailList
      应用模块      application  /zero-box/application
      文件相关模块   file        /zero-box/file
      日志模块      journal      /zero-box/log
      消息列表      news         /zero-box/news
      手机相关      phone        /zero-box/sms
      流程相关      process      /zero-box/flowPath
      系统相关      system       /zero-box/system
      权限          authorized  /zero-box/jurisdiction
    */


/*
  
    api: addressBook.getLabelGroup
    

移除角色接口  this.$api.addressBook.removeLabel 参数改变 {company_id: 企业id, label_id: 45987}
获取角色内人员信息 this.$api.addressBook.getLabelDetail 参数改变
编辑角色名称  this.$api.addressBook.updateLabel 参数改变

原有接口进行 更新 修改 新增接口
角色人员增加删除 this.$api.addressBook.updateLabelPeople
   

*/

  </script>

</body>

</html>