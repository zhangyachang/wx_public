(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-orders-ordersList"],{"08db":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"order-list"},[i("v-uni-view",{staticClass:"ol-header-wrap"},[i("v-uni-view",{staticClass:"ol-header"},[i("HeaderTitle",{attrs:{content:"兑换订单"}})],1)],1),t._l(t.orderList,function(e){return i("v-uni-view",{key:e.order,staticClass:"orders_list_wrapper",on:{click:function(i){i=t.$handleEvent(i),t.goDetail(e)}}},[i("v-uni-view",{staticClass:"orders_list_title"},[t._v("订单"+t._s(e.order))]),i("v-uni-view",{staticClass:"orders_list_content"},[i("v-uni-view",{staticClass:"orders_list_img"},[i("v-uni-image",{attrs:{src:e.icon,mode:""}})],1),i("v-uni-view",{staticClass:"orders_list_text"},[i("v-uni-view",{staticClass:"orders_list_text_box"},[i("v-uni-view",{staticClass:"orders_list_text_title"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"orders_list_text_time"},[i("v-uni-view",{staticClass:"orders_list_text_state ",class:{bgExchange:3==e.type,bgExchange:3!=e.type&&2==e.status,bgWait:3!=e.type&&1==e.status}},[t._v(t._s(3==e.type?"已兑换":"")+"\n\t\t\t\t\t\t\t"+t._s(3!=e.type&&1==e.status?"待兑换":"已兑换"))])],1)],1),i("v-uni-view",{staticClass:"order_list_text_item"},[i("v-uni-view",{staticClass:"order_list_text_time"},[i("v-uni-view",{staticClass:"des"},[t._v(t._s(1==e.status?"下单时间":"收货时间"))]),i("v-uni-view",{staticClass:"time"},[t._v(t._s(e.time))])],1),i("v-uni-view",{staticClass:"orders_list_text_num"},[t._v("共"+t._s(e.exchange)+"件商品")])],1),i("v-uni-view",{staticClass:"order_list_all_integral"},[t._v("合计"),i("v-uni-text",[t._v(t._s(e.integral)+"积分")])],1)],1),2==e.type&&1==e.status?i("v-uni-view",{staticClass:"orders_list_btn",on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.scanCode(e)}}},[i("v-uni-view",{staticClass:"orders_list_receive"},[t._v("扫码领取")])],1):t._e()],1)],1)}),i("LoadMore",{attrs:{loadingType:t.loadingType,contentText:t.contentText}})],2)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"1b79":function(t,e,i){"use strict";i.r(e);var a=i("08db"),n=i("a4a9");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("8090");var r=i("2877"),s=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"3e0f3356",null);e["default"]=s.exports},2962:function(t,e,i){"use strict";i.r(e);var a=i("d850"),n=i("8251");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("db1d");var r=i("2877"),s=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"1c2f5f88",null);e["default"]=s.exports},"2afc":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var a={name:"load-more",props:{loadingType:{type:Number,default:0},showImage:{type:Boolean,default:!0},color:{type:String,default:"#777777"},contentText:{type:Object,default:function(){return{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}}},data:function(){return{}}};e.default=a},"479f":function(t,e,i){"use strict";i.r(e);var a=i("4da8"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},"4da8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{content:{type:String,required:!0},color:{type:String,default:"#000"},delta:{default:1}},data:function(){return{statusTop:0}},onLoad:function(){var t=this;wx.getSystemInfo({success:function(e){t.statusTop=e.statusBarHeight}})},methods:{back:function(){var t=this;uni.navigateBack({delta:t.delta})}}};e.default=a},"55e7":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.order-list[data-v-3e0f3356]{height:100%}.ol-header-wrap[data-v-3e0f3356]{height:calc(0px + 44px)}.ol-header[data-v-3e0f3356]{position:fixed;top:0;z-index:9;width:100%;background:#fff}.ol_content[data-v-3e0f3356]{padding-top:%?20?%}.orders_list_box[data-v-3e0f3356]{overflow:auto;margin-top:%?20?%;padding:0 %?28?%}.orders_list_wrapper[data-v-3e0f3356]{-webkit-box-shadow:#ececec %?0?% %?0?% %?10?% %?5?%;box-shadow:#ececec %?0?% %?0?% %?10?% %?5?%;border-radius:%?10?%;\n\t/* margin-bottom: 20upx; */margin:0 %?25?% %?20?% %?25?%}.orders_list_title[data-v-3e0f3356]{font-size:%?28?%;height:%?80?%;width:100%;color:#00b277;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:%?58?%;position:relative;border-bottom:1px solid #e5e5e5}.orders_list_title[data-v-3e0f3356]:after{content:"";width:%?10?%;height:%?30?%;background-color:#04ca9c;border-radius:%?5?%;position:absolute;left:%?34?%;top:%?26?%}.orders_list_content[data-v-3e0f3356]{padding:%?38?% %?32?% %?25?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}.orders_list_img[data-v-3e0f3356]{width:%?142?%;height:%?142?%;border-radius:%?10?%;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #eee;padding:%?2?%}.orders_list_img>uni-image[data-v-3e0f3356]{width:100%;height:100%}.orders_list_text[data-v-3e0f3356]{\n\t/* height: 142upx; */padding-top:%?16?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin-left:%?20?%}.orders_list_text_title[data-v-3e0f3356]{font-size:%?26?%;color:#333;margin-bottom:%?10?%}.orders_list_text_time[data-v-3e0f3356]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:%?24?%;color:#999}.orders_list_text_state[data-v-3e0f3356]{margin-right:%?20?%;color:#fff;width:%?92?%;height:%?38?%;line-height:%?38?%;text-align:center;border-radius:%?6?%}.bgInvalid[data-v-3e0f3356]{background-color:#ccc}.bgExchange[data-v-3e0f3356]{background-color:#5caaff}.bgWait[data-v-3e0f3356]{background-color:#ffa300}.order_list_text_item[data-v-3e0f3356]{padding-top:%?30?%;font-size:%?24?%;color:#999}.order_list_text_time[data-v-3e0f3356]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.order_list_text_time .time[data-v-3e0f3356]{margin-left:%?15?%}.orders_list_text_num[data-v-3e0f3356]{margin-top:%?18?%;font-size:%?24?%;color:#999}.orders_list_btn[data-v-3e0f3356]{position:absolute;\n\t/* bottom: 0; */right:0;padding:%?22?% %?24?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.order_list_all_integral[data-v-3e0f3356]{position:absolute;bottom:%?25?%;right:%?27?%}.order_list_all_integral[data-v-3e0f3356]{font-size:%?24?%;color:#666}.order_list_all_integral uni-text[data-v-3e0f3356]{margin-left:%?10?%;font-size:%?36?%;color:#ffa300}.orders_list_receive[data-v-3e0f3356]{height:%?62?%;width:%?132?%;line-height:%?62?%;text-align:center;border-radius:%?10?%;font-size:%?26?%;background:-webkit-gradient(linear,left top,left bottom,from(#02d0a7),to(#06c08c));background:-o-linear-gradient(top,#02d0a7,#06c08c);background:linear-gradient(top,#02d0a7,#06c08c);color:#fff;margin-left:%?20?%}.orders_list_cancel[data-v-3e0f3356]{height:%?62?%;line-height:%?62?%;color:#666;font-size:%?26?%;display:none}\n',""])},"7d69":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("3b8d")),o=a(i("e44a")),r=a(i("2962")),s={data:function(){return{orderList:[],pageSize:10,pageIndex:0,loadingText:"加载中...",loadingType:0,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}},onShow:function(){this.getOrderList()},onReachBottom:function(){console.log("下拉到底部"),this.getOrderList()},methods:{getOrderList:function(){var t=(0,n.default)(regeneratorRuntime.mark(function t(){var e,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0==this.loadingType){t.next=2;break}return t.abrupt("return");case 2:if(this.loadingType=1,uni.showNavigationBarLoading(),e=this,i=this.$utils.getOpenid(),i){t.next=8;break}return t.abrupt("return",this.$utils.showToast("获取openid失败"));case 8:return this.pageIndex++,t.next=11,this.$api.orders.getOrdersList({openid:i,pageIndex:e.pageIndex,pageSize:e.pageSize});case 11:if(a=t.sent,console.log("获取到的列表内容"),console.log(a),75500!==a.statusCode){t.next=18;break}return t.abrupt("return",this.$utils.showToast("服务异常，请稍后重试"));case 18:if(75200!==a.statusCode){t.next=26;break}if(0!==a.result.length){t.next=23;break}return this.loadingType=2,uni.hideNavigationBarLoading(),t.abrupt("return");case 23:this.orderList=this.orderList.concat(a.result),a.result.length<this.pageSize?this.loadingType=2:this.loadingType=0,uni.hideNavigationBarLoading();case 26:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),scanCode:function(){var t=(0,n.default)(regeneratorRuntime.mark(function t(e){var i,a,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),i=this.$utils.getShopInfo(),console.log("获取到的商店信息"),console.log(i),i.shopid){t.next=7;break}return uni.navigateTo({url:"/pages/orders/chooseShop?fromOrder="+e.order}),t.abrupt("return");case 7:if(console.log(this.$utils),a=this.$utils.getOpenid(),a){t.next=11;break}return t.abrupt("return",this.$utils.showToast("openid获取失败"));case 11:return t.next=13,this.$utils.getScanCode();case 13:if(n=t.sent,200===n.status){t.next=16;break}return t.abrupt("return");case 16:return t.next=18,this.$api.orders.getGoodsInStore({order:e.order,code:n.con,openid:a,storeName:i.storeName,shopid:i.shopid,licenceAddress:i.licenceAddress});case 18:if(o=t.sent,72513!==o.statusCode){t.next=23;break}return t.abrupt("return",this.$utils.showToast("兑换失败，商品库不足"));case 23:if(72515!==o.statusCode){t.next=27;break}return t.abrupt("return",this.$utils.showToast("该订单非自提"));case 27:if(72516!==o.statusCode){t.next=31;break}return t.abrupt("return",this.$utils.showToast("订单已完成，无法再进行兑换"));case 31:if(72512!==o.statusCode){t.next=35;break}return t.abrupt("return",this.$utils.showToast("订单信息有误"));case 35:if(72511!==o.statusCode){t.next=39;break}return t.abrupt("return",this.$utils.showToast("请录入实体商品条码"));case 39:if(72514!==o.statusCode){t.next=41;break}return t.abrupt("return",this.$utils.showToast("未收录的商品"));case 41:75200===o.statusCode&&(e.convertible=e.convertible+1,e.exchange-e.convertible==0?(2==o.status?this.$utils.showToast("".concat(o.texts,",增加").concat(o.integral,"积分")):this.$utils.showToast("商品兑换成功"),e.status=2,setTimeout(function(){uni.navigateTo({url:"/pages/orders/orderDetail?orderid="+e.order})},500)):2==o.status?this.$utils.showToast("".concat(o.texts,",增加").concat(o.integral,"积分")):this.$utils.showToast("商品兑换成功,还有".concat(e.exchange-e.convertible,"商品待兑换哦")));case 42:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),goDetail:function(t){uni.navigateTo({url:"/pages/orders/orderDetail?orderid="+t.order})}},components:{HeaderTitle:o.default,LoadMore:r.default}};e.default=s},8090:function(t,e,i){"use strict";var a=i("c2fc"),n=i.n(a);n.a},8251:function(t,e,i){"use strict";i.r(e);var a=i("2afc"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},a4a9:function(t,e,i){"use strict";i.r(e);var a=i("7d69"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},a66a:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".load-more[data-v-1c2f5f88]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;height:%?80?%;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:%?10?%}.loading-img[data-v-1c2f5f88]{height:24px;width:24px;margin-right:10px}.loading-text[data-v-1c2f5f88]{font-size:%?28?%;color:#777}.loading-img>uni-view[data-v-1c2f5f88]{position:absolute}.load1[data-v-1c2f5f88],.load2[data-v-1c2f5f88],.load3[data-v-1c2f5f88]{height:24px;width:24px}.load2[data-v-1c2f5f88]{-webkit-transform:rotate(30deg);-ms-transform:rotate(30deg);transform:rotate(30deg)}.load3[data-v-1c2f5f88]{-webkit-transform:rotate(60deg);-ms-transform:rotate(60deg);transform:rotate(60deg)}.loading-img>uni-view uni-view[data-v-1c2f5f88]{width:6px;height:2px;border-top-left-radius:1px;border-bottom-left-radius:1px;background:#777;position:absolute;opacity:.2;-webkit-transform-origin:50%;-ms-transform-origin:50%;transform-origin:50%;-webkit-animation:load-data-v-1c2f5f88 1.56s ease infinite}.loading-img>uni-view uni-view[data-v-1c2f5f88]:first-child{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);top:2px;left:9px}.loading-img>uni-view uni-view[data-v-1c2f5f88]:nth-child(2){-webkit-transform:rotate(180deg);top:11px;right:0}.loading-img>uni-view uni-view[data-v-1c2f5f88]:nth-child(3){-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg);bottom:2px;left:9px}.loading-img>uni-view uni-view[data-v-1c2f5f88]:nth-child(4){top:11px;left:0}.load1 uni-view[data-v-1c2f5f88]:first-child{-webkit-animation-delay:0s;animation-delay:0s}.load2 uni-view[data-v-1c2f5f88]:first-child{-webkit-animation-delay:.13s;animation-delay:.13s}.load3 uni-view[data-v-1c2f5f88]:first-child{-webkit-animation-delay:.26s;animation-delay:.26s}.load1 uni-view[data-v-1c2f5f88]:nth-child(2){-webkit-animation-delay:.39s;animation-delay:.39s}.load2 uni-view[data-v-1c2f5f88]:nth-child(2){-webkit-animation-delay:.52s;animation-delay:.52s}.load3 uni-view[data-v-1c2f5f88]:nth-child(2){-webkit-animation-delay:.65s;animation-delay:.65s}.load1 uni-view[data-v-1c2f5f88]:nth-child(3){-webkit-animation-delay:.78s;animation-delay:.78s}.load2 uni-view[data-v-1c2f5f88]:nth-child(3){-webkit-animation-delay:.91s;animation-delay:.91s}.load3 uni-view[data-v-1c2f5f88]:nth-child(3){-webkit-animation-delay:1.04s;animation-delay:1.04s}.load1 uni-view[data-v-1c2f5f88]:nth-child(4){-webkit-animation-delay:1.17s;animation-delay:1.17s}.load2 uni-view[data-v-1c2f5f88]:nth-child(4){-webkit-animation-delay:1.3s;animation-delay:1.3s}.load3 uni-view[data-v-1c2f5f88]:nth-child(4){-webkit-animation-delay:1.43s;animation-delay:1.43s}@-webkit-keyframes load-data-v-1c2f5f88{0%{opacity:1}to{opacity:.2}}",""])},ba20:function(t,e,i){var a=i("a66a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("7a5178da",a,!0,{sourceMap:!1,shadowMode:!1})},c2fc:function(t,e,i){var a=i("55e7");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("6a8f8d4c",a,!0,{sourceMap:!1,shadowMode:!1})},d850:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"load-more"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1===t.loadingType&&t.showImage,expression:"loadingType === 1 && showImage"}],staticClass:"loading-img"},[i("v-uni-view",{staticClass:"load1"},[i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}})],1),i("v-uni-view",{staticClass:"load2"},[i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}})],1),i("v-uni-view",{staticClass:"load3"},[i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}})],1)],1),i("v-uni-text",{staticClass:"loading-text",style:{color:t.color}},[t._v(t._s(0===t.loadingType?t.contentText.contentdown:1===t.loadingType?t.contentText.contentrefresh:t.contentText.contentnomore))])],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},db1d:function(t,e,i){"use strict";var a=i("ba20"),n=i.n(a);n.a},e44a:function(t,e,i){"use strict";i.r(e);var a=i("ed82"),n=i("479f");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var r=i("2877"),s=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"0a0d4634",null);e["default"]=s.exports},ed82:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"title-contents flex flex-center",style:{paddingTop:t.statusTop+"px"}},["#fff"===t.color?[i("v-uni-image",{attrs:{src:"../../static/img/back_icon.png",mode:""},on:{click:function(e){e=t.$handleEvent(e),t.back(e)}}})]:[i("v-uni-image",{attrs:{src:"../../static/img/jiantou_black_icon.png",mode:""},on:{click:function(e){e=t.$handleEvent(e),t.back(e)}}})],i("v-uni-text",{style:"color:"+t.color},[t._v(t._s(t.content))])],2)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})}}]);